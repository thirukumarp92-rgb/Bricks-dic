<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Local Brick Manufacturers Directory</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Source+Sans+3:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
  :root {
    --brick: #c0392b;
    --brick-dark: #922b21;
    --brick-light: #e74c3c;
    --mortar: #f5efe6;
    --earth: #8B6914;
    --text: #2c1a0e;
    --card-bg: #fff9f4;
    --shadow: 0 4px 20px rgba(192,57,43,0.15);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Source Sans 3', sans-serif;
    background: var(--mortar);
    color: var(--text);
    background-image: 
      repeating-linear-gradient(0deg, transparent, transparent 39px, rgba(180,130,100,0.08) 39px, rgba(180,130,100,0.08) 40px),
      repeating-linear-gradient(90deg, transparent, transparent 79px, rgba(180,130,100,0.06) 79px, rgba(180,130,100,0.06) 80px);
  }

  header {
    background: linear-gradient(135deg, var(--brick-dark) 0%, var(--brick) 60%, var(--earth) 100%);
    color: white;
    padding: 28px 20px 22px;
    text-align: center;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  }

  header::before {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      90deg,
      transparent 0px, transparent 60px,
      rgba(255,255,255,0.04) 60px, rgba(255,255,255,0.04) 61px
    ),
    repeating-linear-gradient(
      0deg,
      transparent 0px, transparent 30px,
      rgba(255,255,255,0.04) 30px, rgba(255,255,255,0.04) 31px
    );
  }

  header h1 {
    font-family: 'Oswald', sans-serif;
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    position: relative;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.4);
  }

  header p {
    font-size: 0.9rem;
    opacity: 0.85;
    margin-top: 5px;
    position: relative;
    letter-spacing: 0.5px;
  }

  .subtitle-icon {
    font-size: 1.4rem;
    margin-bottom: 6px;
  }

  .main-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 24px 16px;
  }

  .section-title {
    font-family: 'Oswald', sans-serif;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--brick-dark);
    border-left: 4px solid var(--brick);
    padding-left: 10px;
    margin: 24px 0 14px;
  }

  /* Cards */
  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 16px;
  }

  .card {
    background: var(--card-bg);
    border-radius: 10px;
    box-shadow: var(--shadow);
    border: 1px solid rgba(192,57,43,0.12);
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
    animation: fadeUp 0.4s ease both;
  }

  .card:hover { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(192,57,43,0.2); }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card-header {
    background: linear-gradient(135deg, var(--brick) 0%, var(--brick-light) 100%);
    padding: 14px 16px 10px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .card-header .icon {
    width: 40px; height: 40px;
    background: rgba(255,255,255,0.2);
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.3rem;
    flex-shrink: 0;
  }

  .card-header .owner-name {
    font-family: 'Oswald', sans-serif;
    font-size: 1.05rem;
    color: white;
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  .card-header .business-name {
    font-size: 0.75rem;
    color: rgba(255,255,255,0.8);
    margin-top: 1px;
  }

  .card-body { padding: 14px 16px; }

  .info-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 5px 0;
    font-size: 0.85rem;
    color: #555;
    border-bottom: 1px dashed rgba(0,0,0,0.07);
  }

  .info-row:last-child { border-bottom: none; }
  .info-row .label { font-weight: 600; color: var(--brick-dark); min-width: 70px; font-size: 0.78rem; text-transform: uppercase; letter-spacing: 0.5px; }

  .price-display {
    font-family: 'Oswald', sans-serif;
    font-size: 1.15rem;
    color: var(--brick);
    font-weight: 600;
  }

  .card-footer {
    display: flex;
    gap: 8px;
    padding: 10px 16px;
    background: rgba(192,57,43,0.04);
    border-top: 1px solid rgba(192,57,43,0.08);
  }

  .btn {
    flex: 1;
    padding: 8px;
    border: none;
    border-radius: 6px;
    font-family: 'Source Sans 3', sans-serif;
    font-size: 0.82rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 0.3px;
  }

  .btn-edit { background: var(--brick); color: white; }
  .btn-edit:hover { background: var(--brick-dark); }
  .btn-delete { background: #f0f0f0; color: #777; }
  .btn-delete:hover { background: #e0e0e0; color: #444; }
  .btn-call { background: #27ae60; color: white; }
  .btn-call:hover { background: #219a52; }

  /* Add form */
  .add-card {
    background: var(--card-bg);
    border-radius: 10px;
    box-shadow: var(--shadow);
    border: 2px dashed rgba(192,57,43,0.3);
    padding: 20px;
    margin-bottom: 10px;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-bottom: 10px;
  }

  .form-row.single { grid-template-columns: 1fr; }

  input, textarea, select {
    width: 100%;
    padding: 10px 12px;
    border: 1.5px solid rgba(192,57,43,0.2);
    border-radius: 7px;
    font-family: 'Source Sans 3', sans-serif;
    font-size: 0.9rem;
    background: white;
    color: var(--text);
    transition: border-color 0.2s;
    outline: none;
  }

  input:focus, textarea:focus { border-color: var(--brick); }

  label {
    display: block;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--brick-dark);
    margin-bottom: 4px;
  }

  .btn-add-submit {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, var(--brick-dark), var(--brick));
    color: white;
    border: none;
    border-radius: 8px;
    font-family: 'Oswald', sans-serif;
    font-size: 1rem;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
    cursor: pointer;
    transition: opacity 0.2s;
    margin-top: 8px;
  }

  .btn-add-submit:hover { opacity: 0.9; }

  /* Modal */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .modal-overlay.active { display: flex; }

  .modal {
    background: white;
    border-radius: 14px;
    padding: 24px;
    width: 100%;
    max-width: 400px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  }

  .modal h3 {
    font-family: 'Oswald', sans-serif;
    font-size: 1.3rem;
    color: var(--brick);
    margin-bottom: 18px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .modal-btns {
    display: flex;
    gap: 10px;
    margin-top: 16px;
  }

  .btn-save {
    flex: 1; padding: 11px; background: var(--brick); color: white;
    border: none; border-radius: 8px; font-family: 'Oswald', sans-serif;
    font-size: 0.95rem; font-weight: 600; cursor: pointer; letter-spacing: 1px;
    text-transform: uppercase;
  }

  .btn-cancel {
    flex: 1; padding: 11px; background: #eee; color: #555;
    border: none; border-radius: 8px; font-family: 'Source Sans 3', sans-serif;
    font-size: 0.9rem; cursor: pointer;
  }

  /* QR Section */
  .qr-section {
    background: white;
    border-radius: 14px;
    padding: 24px;
    text-align: center;
    box-shadow: var(--shadow);
    border: 1px solid rgba(192,57,43,0.12);
    margin-top: 10px;
  }

  .qr-section p {
    font-size: 0.88rem;
    color: #666;
    margin: 12px 0 0;
    line-height: 1.5;
  }

  #qrcode {
    display: inline-block;
    padding: 12px;
    background: white;
    border: 3px solid var(--brick);
    border-radius: 10px;
    margin: 14px auto 0;
  }

  .qr-label {
    font-family: 'Oswald', sans-serif;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--brick-dark);
    margin-top: 10px;
  }

  .toggle-add-btn {
    width: 100%;
    padding: 12px;
    background: white;
    color: var(--brick);
    border: 2px solid var(--brick);
    border-radius: 8px;
    font-family: 'Oswald', sans-serif;
    font-size: 0.95rem;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
    margin-bottom: 12px;
  }

  .toggle-add-btn:hover { background: var(--brick); color: white; }

  .stats-bar {
    display: flex;
    gap: 12px;
    margin-bottom: 6px;
    flex-wrap: wrap;
  }

  .stat {
    background: white;
    border-radius: 8px;
    padding: 10px 18px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    text-align: center;
    flex: 1;
    min-width: 100px;
    border-top: 3px solid var(--brick);
  }

  .stat .num {
    font-family: 'Oswald', sans-serif;
    font-size: 1.6rem;
    color: var(--brick);
    font-weight: 700;
  }

  .stat .desc {
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #888;
    margin-top: 2px;
  }

  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #aaa;
    font-size: 0.95rem;
  }

  .empty-state .icon { font-size: 3rem; margin-bottom: 10px; }

  @media (max-width: 500px) {
    header h1 { font-size: 1.5rem; }
    .form-row { grid-template-columns: 1fr; }
    .stats-bar { gap: 8px; }
  }
</style>
</head>
<body>

<header>
  <div class="subtitle-icon">üß±</div>
  <h1>Brick Manufacturers Directory</h1>
  <p>Local Small-Scale Manufacturers ¬∑ Live Prices ¬∑ Contact Info</p>
</header>

<div class="main-container">

  <!-- Stats -->
  <div class="stats-bar" id="statsBar">
    <div class="stat"><div class="num" id="countStat">0</div><div class="desc">Manufacturers</div></div>
    <div class="stat"><div class="num" id="avgPriceStat">‚Äî</div><div class="desc">Avg Price/1000</div></div>
    <div class="stat"><div class="num" id="lowPriceStat">‚Äî</div><div class="desc">Lowest Price</div></div>
  </div>

  <!-- Add new -->
  <div class="section-title">Manufacturer Listings</div>
  <button class="toggle-add-btn" onclick="toggleAddForm()">‚ûï Add New Manufacturer</button>

  <div class="add-card" id="addForm" style="display:none">
    <div class="section-title" style="margin-top:0">Add Manufacturer</div>
    <div class="form-row">
      <div>
        <label>Owner Name *</label>
        <input id="inp-owner" placeholder="e.g. Ramesh Kumar" />
      </div>
      <div>
        <label>Business Name</label>
        <input id="inp-biz" placeholder="e.g. Kumar Bricks" />
      </div>
    </div>
    <div class="form-row">
      <div>
        <label>Phone Number *</label>
        <input id="inp-phone" placeholder="e.g. 9876543210" type="tel" />
      </div>
      <div>
        <label>Location / Village</label>
        <input id="inp-loc" placeholder="e.g. Sector 4, Main Road" />
      </div>
    </div>
    <div class="form-row">
      <div>
        <label>Price per 1000 Bricks (‚Çπ) *</label>
        <input id="inp-price" placeholder="e.g. 7500" type="number" />
      </div>
      <div>
        <label>Brick Type</label>
        <input id="inp-type" placeholder="e.g. Red Clay, Fly Ash" />
      </div>
    </div>
    <div class="form-row single">
      <div>
        <label>Notes / Special Offers</label>
        <input id="inp-notes" placeholder="e.g. Free delivery above 50,000 bricks" />
      </div>
    </div>
    <button class="btn-add-submit" onclick="addManufacturer()">‚úî Add to Directory</button>
  </div>

  <!-- Cards -->
  <div class="cards-grid" id="cardsGrid">
    <div class="empty-state" id="emptyState">
      <div class="icon">üèóÔ∏è</div>
      <div>No manufacturers added yet.<br>Click "Add New Manufacturer" to get started!</div>
    </div>
  </div>

  <!-- QR Code -->
  <div class="section-title" style="margin-top:28px">Share This Directory</div>
  <div class="qr-section">
    <p>Print this QR code on your banner. Customers can scan it to view all listed manufacturers and their current prices.</p>
    <div id="qrcode"></div>
    <div class="qr-label">üîó Scan to View All Listings</div>
    <p style="margin-top:8px; font-size:0.78rem; color:#aaa">QR code links to this page ‚Äî works offline too if saved!</p>
    <button onclick="window.print()" style="margin-top:14px; padding:10px 24px; background:var(--brick); color:white; border:none; border-radius:7px; font-family:'Oswald',sans-serif; font-size:0.9rem; letter-spacing:1px; text-transform:uppercase; cursor:pointer;">üñ®Ô∏è Print / Save for Banner</button>
  </div>

</div>

<!-- Edit Modal -->
<div class="modal-overlay" id="editModal">
  <div class="modal">
    <h3>‚úèÔ∏è Edit Manufacturer</h3>
    <input type="hidden" id="edit-idx" />
    <div style="margin-bottom:10px">
      <label>Owner Name</label>
      <input id="edit-owner" />
    </div>
    <div style="margin-bottom:10px">
      <label>Business Name</label>
      <input id="edit-biz" />
    </div>
    <div style="margin-bottom:10px">
      <label>Phone Number</label>
      <input id="edit-phone" type="tel" />
    </div>
    <div style="margin-bottom:10px">
      <label>Location / Village</label>
      <input id="edit-loc" />
    </div>
    <div style="margin-bottom:10px">
      <label>Price per 1000 Bricks (‚Çπ)</label>
      <input id="edit-price" type="number" />
    </div>
    <div style="margin-bottom:10px">
      <label>Brick Type</label>
      <input id="edit-type" />
    </div>
    <div style="margin-bottom:10px">
      <label>Notes / Special Offers</label>
      <input id="edit-notes" />
    </div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeModal()">Cancel</button>
      <button class="btn-save" onclick="saveEdit()">üíæ Save Changes</button>
    </div>
  </div>
</div>

<script>
  let manufacturers = JSON.parse(localStorage.getItem('brickDir') || '[]');

  // Load sample data if empty
  if (manufacturers.length === 0) {
    manufacturers = [
      { owner: 'Ramesh Kumar', biz: 'Kumar Bricks', phone: '9876543210', loc: 'Near Bus Stand, Village Road', price: '7500', type: 'Red Clay Bricks', notes: 'Free delivery above 50,000 bricks' },
      { owner: 'Suresh Patel', biz: 'Patel Brick Works', phone: '9823456710', loc: 'Old Factory Area, NH-7', price: '7200', type: 'Fly Ash Bricks', notes: 'Bulk discount available' },
      { owner: 'Mohan Singh', biz: 'Singh Enterprises', phone: '9765432109', loc: 'Industrial Zone, Block B', price: '7800', type: 'Fire Bricks', notes: 'Available 7 days a week' },
    ];
    save();
  }

  function save() {
    localStorage.setItem('brickDir', JSON.stringify(manufacturers));
    renderCards();
    renderStats();
  }

  function renderCards() {
    const grid = document.getElementById('cardsGrid');
    const empty = document.getElementById('emptyState');
    grid.innerHTML = '';

    if (manufacturers.length === 0) {
      grid.appendChild(empty);
      return;
    }

    manufacturers.forEach((m, i) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.style.animationDelay = (i * 0.07) + 's';
      card.innerHTML = `
        <div class="card-header">
          <div class="icon">üß±</div>
          <div>
            <div class="owner-name">${m.owner}</div>
            <div class="business-name">${m.biz || 'Brick Manufacturer'}</div>
          </div>
        </div>
        <div class="card-body">
          <div class="info-row"><span class="label">üìç Location</span><span>${m.loc || 'Not specified'}</span></div>
          <div class="info-row"><span class="label">üí∞ Price</span><span class="price-display">‚Çπ${Number(m.price).toLocaleString('en-IN')}/1000</span></div>
          <div class="info-row"><span class="label">üèóÔ∏è Type</span><span>${m.type || 'Standard Bricks'}</span></div>
          <div class="info-row"><span class="label">üìû Phone</span><span>${m.phone}</span></div>
          ${m.notes ? `<div class="info-row"><span class="label">üìù Notes</span><span>${m.notes}</span></div>` : ''}
        </div>
        <div class="card-footer">
          <button class="btn btn-call" onclick="window.location.href='tel:${m.phone}'">üìû Call</button>
          <button class="btn btn-edit" onclick="openEdit(${i})">‚úèÔ∏è Edit</button>
          <button class="btn btn-delete" onclick="deleteEntry(${i})">üóëÔ∏è</button>
        </div>
      `;
      grid.appendChild(card);
    });
  }

  function renderStats() {
    document.getElementById('countStat').textContent = manufacturers.length;
    if (manufacturers.length === 0) {
      document.getElementById('avgPriceStat').textContent = '‚Äî';
      document.getElementById('lowPriceStat').textContent = '‚Äî';
      return;
    }
    const prices = manufacturers.map(m => Number(m.price)).filter(p => p > 0);
    const avg = Math.round(prices.reduce((a, b) => a + b, 0) / prices.length);
    const low = Math.min(...prices);
    document.getElementById('avgPriceStat').textContent = '‚Çπ' + avg.toLocaleString('en-IN');
    document.getElementById('lowPriceStat').textContent = '‚Çπ' + low.toLocaleString('en-IN');
  }

  function toggleAddForm() {
    const f = document.getElementById('addForm');
    f.style.display = f.style.display === 'none' ? 'block' : 'none';
  }

  function addManufacturer() {
    const owner = document.getElementById('inp-owner').value.trim();
    const phone = document.getElementById('inp-phone').value.trim();
    const price = document.getElementById('inp-price').value.trim();
    if (!owner || !phone || !price) { alert('Please fill Owner Name, Phone and Price.'); return; }
    manufacturers.push({
      owner,
      biz: document.getElementById('inp-biz').value.trim(),
      phone,
      loc: document.getElementById('inp-loc').value.trim(),
      price,
      type: document.getElementById('inp-type').value.trim(),
      notes: document.getElementById('inp-notes').value.trim()
    });
    ['inp-owner','inp-biz','inp-phone','inp-loc','inp-price','inp-type','inp-notes'].forEach(id => document.getElementById(id).value = '');
    document.getElementById('addForm').style.display = 'none';
    save();
  }

  function deleteEntry(i) {
    if (confirm('Remove ' + manufacturers[i].owner + ' from the directory?')) {
      manufacturers.splice(i, 1);
      save();
    }
  }

  function openEdit(i) {
    const m = manufacturers[i];
    document.getElementById('edit-idx').value = i;
    document.getElementById('edit-owner').value = m.owner;
    document.getElementById('edit-biz').value = m.biz;
    document.getElementById('edit-phone').value = m.phone;
    document.getElementById('edit-loc').value = m.loc;
    document.getElementById('edit-price').value = m.price;
    document.getElementById('edit-type').value = m.type;
    document.getElementById('edit-notes').value = m.notes;
    document.getElementById('editModal').classList.add('active');
  }

  function closeModal() {
    document.getElementById('editModal').classList.remove('active');
  }

  function saveEdit() {
    const i = parseInt(document.getElementById('edit-idx').value);
    manufacturers[i] = {
      owner: document.getElementById('edit-owner').value,
      biz: document.getElementById('edit-biz').value,
      phone: document.getElementById('edit-phone').value,
      loc: document.getElementById('edit-loc').value,
      price: document.getElementById('edit-price').value,
      type: document.getElementById('edit-type').value,
      notes: document.getElementById('edit-notes').value
    };
    closeModal();
    save();
  }

  // QR Code
  function generateQR() {
    document.getElementById('qrcode').innerHTML = '';
    new QRCode(document.getElementById('qrcode'), {
      text: window.location.href,
      width: 160,
      height: 160,
      colorDark: '#c0392b',
      colorLight: '#ffffff',
      correctLevel: QRCode.CorrectLevel.M
    });
  }

  // Init
  renderCards();
  renderStats();
  generateQR();
</script>
</body>
</html>
